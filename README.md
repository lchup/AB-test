# AB-test

## AA-test
Перед проведением AB теста надо удостовериться, 
что наша система корректно бьет пользователей на группы.
То есть группы, на которые мы побили пользователей, 
не отличаются друг от друга до тех пор, пока мы не выкатили 
на них новую функциональность. 
Для проверки справедливости этого надо провести А/А-тест. 


В идеале было бы здорово провести бесконечное количество А/A-тестов и посмотреть, 
в каком количестве случаев нам удалось отклонить нулевую гипотезу.

На практике провести бесконечное число тестов вряд ли получится, поэтому
будем многократно извлекать подвыборки из наших данных, проводить t-test, а в конце посмотрим, 
в каком проценте случаев нам удалось отклонить нулевую гипотезу.

Итак: есть данные А/А-теста с '2023-11-11' по '2023-11-17'. 
Нужно сделать симуляцию, как будто мы провели 10000 А/А-тестов. 
На каждой итерации нужно сформировать подвыборки без повторения в 500 юзеров 
из 2 и 3 экспериментальной группы. Провести сравнение этих подвыборок t-testом.

[AA-test Jupyter Notebook](AA.ipynb)

[dataset](datasets/1.csv)

## AB-test
Эксперимент проходил с 2023-11-18 по 2023-11-24 включительно. 
Для эксперимента были задействованы 2 и 1 группы. 
В группе 2 был использован один из новых алгоритмов рекомендации постов, 
группа 1 использовалась в качестве контроля. 

Основная гипотеза заключается в том, что новый алгоритм во 2-й группе приведет к увеличению CTR. 

Задача — проанализировать данные А/B-теста. 

[AB-test Jupyter Notebook](AB.ipynb)

[dataset](datasets/2.csv)


## AB-test Линеаризированные лайки
Относительно недавно (в 2018-м году) исследователи из Яндекса разработали 
классный метод анализа тестов над метриками-отношениями вида  𝑥/𝑦.

Вместо того, использовать «поюзерные» CTR, 
можно сконструировать другую метрику и анализировать ее, 
но при этом гарантируется, 
что если тест на этой другой метрике «прокрасится» и увидит изменения, 
значит изменения есть и в метрике исходной
(то есть в лайках на пользователя и в пользовательских CTR

* Считаем общий CTR в контрольной группе  𝐶𝑇𝑅𝑐𝑜𝑛𝑡𝑟𝑜𝑙=𝑠𝑢𝑚(𝑙𝑖𝑘𝑒𝑠)/𝑠𝑢𝑚(𝑣𝑖𝑒𝑤𝑠) 
* Посчитаем в обеих группах поюзерную метрику  𝑙𝑖𝑛𝑒𝑎𝑟𝑖𝑧𝑒𝑑_𝑙𝑖𝑘𝑒𝑠=𝑙𝑖𝑘𝑒𝑠−𝐶𝑇𝑅𝑐𝑜𝑛𝑡𝑟𝑜𝑙∗𝑣𝑖𝑒𝑤𝑠 
* После чего сравним  t-тестом отличия в группах по метрике 𝑙𝑖𝑛𝑒𝑎𝑟𝑖𝑧𝑒𝑑_𝑙𝑖𝑘𝑒𝑠

[AB-test Jupyter Notebook](AB_ll.ipynb)

[dataset](datasets/3.csv)